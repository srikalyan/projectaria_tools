"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8790],{15680:(e,t,a)=>{a.r(t),a.d(t,{MDXContext:()=>m,MDXProvider:()=>c,mdx:()=>f,useMDXComponents:()=>s,withMDXComponents:()=>p});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var m=r.createContext({}),p=function(e){return function(t){var a=s(t.components);return r.createElement(e,o({},t,{components:a}))}},s=function(e){var t=r.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return r.createElement(m.Provider,{value:t},e.children)},u="mdxType",y={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},x=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,m=d(e,["components","mdxType","originalType","parentName"]),p=s(a),c=n,u=p["".concat(i,".").concat(c)]||p[c]||y[c]||o;return a?r.createElement(u,l(l({ref:t},m),{},{components:a})):r.createElement(u,l({ref:t},m))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=x;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[u]="string"==typeof e?e:n,i[1]=l;for(var m=2;m<o;m++)i[m]=a[m];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}x.displayName="MDXCreateElement"},79760:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var r=a(58168),n=(a(96540),a(15680));const o={sidebar_position:20,title:"Trajectory"},i="MPS output - Trajectory",l={unversionedId:"data_formats/mps/slam/mps_trajectory",id:"data_formats/mps/slam/mps_trajectory",title:"Trajectory",description:"6DoF trajectory data is generated as part of SLAM (location in the Desktop Companion app) Machine Perception Services (MPS) requests:",source:"@site/docs/data_formats/mps/slam/mps_trajectory.mdx",sourceDirName:"data_formats/mps/slam",slug:"/data_formats/mps/slam/mps_trajectory",permalink:"/projectaria_tools/docs/data_formats/mps/slam/mps_trajectory",draft:!1,editUrl:"https://github.com/facebookresearch/projectaria_tools/tree/main/website/docs/data_formats/mps/slam/mps_trajectory.mdx",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_position:20,title:"Trajectory"},sidebar:"tutorialSidebar",previous:{title:"SLAM MPS Outputs",permalink:"/projectaria_tools/docs/data_formats/mps/slam/"},next:{title:"Semi-Dense Point Cloud",permalink:"/projectaria_tools/docs/data_formats/mps/slam/mps_pointcloud"}},d={},m=[{value:"Open loop trajectory",id:"open-loop-trajectory",level:2},{value:"Closed loop trajectory",id:"closed-loop-trajectory",level:2}],p={toc:m},s="wrapper";function c(e){let{components:t,...a}=e;return(0,n.mdx)(s,(0,r.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.mdx)("h1",{id:"mps-output---trajectory"},"MPS output - Trajectory"),(0,n.mdx)("p",null,"6DoF trajectory data is generated as part of SLAM (location in the Desktop Companion app) Machine Perception Services (MPS) requests:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("inlineCode",{parentName:"li"},"open_loop_trajectory.csv")," file"),(0,n.mdx)("li",{parentName:"ul"},(0,n.mdx)("inlineCode",{parentName:"li"},"closed_loop_trajectory.csv")," file")),(0,n.mdx)("p",null,"This data can be visualized using the MPS Viewer in ",(0,n.mdx)("a",{parentName:"p",href:"/projectaria_tools/docs/data_utilities/visualization/visualization_python"},"Python")," or ",(0,n.mdx)("a",{parentName:"p",href:"/projectaria_tools/docs/data_utilities/visualization/visualization_cpp"},"C++"),"."),(0,n.mdx)("h2",{id:"open-loop-trajectory"},"Open loop trajectory"),(0,n.mdx)("p",null,"Open loop trajectory is the high frequency (IMU rate, which is 1kHz) odometry estimation output by the visual-inertial odometry (VIO), in an arbitrary odometry coordinate frame. The estimation includes pose and dynamics (translational and angular velocities)."),(0,n.mdx)("p",null,"The open loop trajectory has good \u201crelative\u201d and \u201clocal\u201d accuracy: the relative transformation between two poses is accurate when the time span between two frames is short (within a few minutes). However, the open loop trajectory has increased drift error accumulated over time spent and travel distance. Consider using closed loop trajectory if you are looking for trajectory without drift error."),(0,n.mdx)("p",null,"For the utility function to load the open loop trajectory in Python and C++, please check the ",(0,n.mdx)("a",{parentName:"p",href:"/projectaria_tools/docs/data_utilities/core_code_snippets/mps#open-loopclosed-loop-trajectory"},"code examples")),(0,n.mdx)("table",null,(0,n.mdx)("thead",{parentName:"table"},(0,n.mdx)("tr",{parentName:"thead"},(0,n.mdx)("th",{parentName:"tr",align:null},"Column"),(0,n.mdx)("th",{parentName:"tr",align:null},"Type"),(0,n.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,n.mdx)("tbody",{parentName:"table"},(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"tracking_timestamp_us")),(0,n.mdx)("td",{parentName:"tr",align:null},"int"),(0,n.mdx)("td",{parentName:"tr",align:null},"Aria device timestamp in microseconds")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"utc_timestamp_ns")),(0,n.mdx)("td",{parentName:"tr",align:null},"int"),(0,n.mdx)("td",{parentName:"tr",align:null},"Wall clock UTC time in nanoseconds. If not available, the value will be -1")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"session_uid")),(0,n.mdx)("td",{parentName:"tr",align:null},"string"),(0,n.mdx)("td",{parentName:"tr",align:null},"Unique identifier of the odometry coordinate frame. When the session_uid is the same, poses and velocities are defined in the same coordinate frame")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"{tx,ty,tz,qx,qy,qz,qw}_odometry_device")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Pose of the device coordinate frame in odometry frame T_odometry_device, include translation (tx, ty, tz) in meters and rotation quaternion (qx, qy, qz, qw)")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"device_linear_velocity_{x,y,z}_odometry")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Velocity of device coordinate frame in odometry frame, (x, y, z) in meter/s")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"angular_velocity_{x,y,z}_device")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Angular velocity of device coordinate frame in device frame, (x, y, z) in rad/s")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"gravity_{x,y,z}_odometry")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Earth gravity vector in odometry frame, (x, y, z) in meter/s^2. This vector is pointing toward the ground, and includes gravitation and centrifugal forces from earth rotation")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"quality_score")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"A quality score between 0.0 to 1.0. The larger the score is, the higher confidence the estimation has higher quality")))),(0,n.mdx)("h2",{id:"closed-loop-trajectory"},"Closed loop trajectory"),(0,n.mdx)("p",null,"Closed loop trajectory is the high frequency (IMU rate, which is 1kHz) pose estimation output by our mapping process, in an arbitrary gravity aligned world coordinate frame. The estimation includes pose and dynamics (translational and angular velocities)."),(0,n.mdx)("p",null,"Closed loop trajectories are fully bundle adjusted with detected loop closures, reducing the VIO drift which is present in the open loop trajectories. However, due to the loop closure correction, the \u201crelative\u201d and \u201clocal\u201d trajectory accuracy within a short time span (i.e. seconds) might be worse compared to open loop trajectories."),(0,n.mdx)("p",null,"In some open datasets we also share and use this format for trajectory pose ground truth from simulation or Optitrack, and the files will be called in a different file name aria_gt_trajectory.csv."),(0,n.mdx)("p",null,"For the utility function to load the closed loop trajectory in Python and C++, please check the ",(0,n.mdx)("a",{parentName:"p",href:"/projectaria_tools/docs/data_utilities/core_code_snippets/mps#open-loopclosed-loop-trajectory"},"code examples")),(0,n.mdx)("table",null,(0,n.mdx)("thead",{parentName:"table"},(0,n.mdx)("tr",{parentName:"thead"},(0,n.mdx)("th",{parentName:"tr",align:null},"Column"),(0,n.mdx)("th",{parentName:"tr",align:null},"Type"),(0,n.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,n.mdx)("tbody",{parentName:"table"},(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"graph_uid")),(0,n.mdx)("td",{parentName:"tr",align:null},"string"),(0,n.mdx)("td",{parentName:"tr",align:null},"Unique identifier of the world coordinate frame")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"tracking_timestamp_us")),(0,n.mdx)("td",{parentName:"tr",align:null},"int"),(0,n.mdx)("td",{parentName:"tr",align:null},"Aria device timestamp in microsecond")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"utc_timestamp_ns")),(0,n.mdx)("td",{parentName:"tr",align:null},"int"),(0,n.mdx)("td",{parentName:"tr",align:null},"Wall clock UTC time in nanosecond. If not available, the value will be -1")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"{tx,ty,tz,qx,qy,qz,qw}_world_device")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Pose of the device coordinate frame in world frame T_world_device, translation (tx, ty, tz) in meters and rotation quaternion (qx, qy, qz, qw)")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"device_linear_velocity_{x,y,z}_device")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Velocity of device coordinate frame in device frame, (x, y, z) in meter/s")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"angular_velocity_{x,y,z}_device")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Angular velocity of device coordinate frame in device frame, (x, y, z) in rad/s")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"gravity_{x,y,z}_world")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"Gravity vector (x, y, z) in the world frame, in meter/s^2. MPS output will all have fixed value` ","[0, 0, -9.81]","\u2019, while other source (e.g. simulation or Optitrack ground truth) may give different values")),(0,n.mdx)("tr",{parentName:"tbody"},(0,n.mdx)("td",{parentName:"tr",align:null},(0,n.mdx)("inlineCode",{parentName:"td"},"quality_score")),(0,n.mdx)("td",{parentName:"tr",align:null},"float"),(0,n.mdx)("td",{parentName:"tr",align:null},"A quality score between 0.0 to 1.0. The larger the score is, the higher confidence the estimation has higher quality`")))))}c.isMDXComponent=!0}}]);